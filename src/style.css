*{box-sizing:border-box}
:root{
  --bg:#0f172a;
  --card:#111827;
  --muted:#94a3b8;
  --text:#e5e7eb;
  --accent:#22c55e;
  --accent-2:#38bdf8;
  --danger:#ef4444;
  --shadow: 0 10px 30px rgba(0,0,0,.25);
}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1000px 600px at 10% 0%, #0b1225 0%, var(--bg) 60%);
  color: var(--text);
}
.container{
  max-width: 1100px;
  margin: 40px auto;
  padding: 0 16px;
}
.header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  margin-bottom: 24px;
}
.title{
  font-size: clamp(20px, 3vw, 44px);
  font-weight: 800;
  letter-spacing: .5px;
  display: flex;
  align-items: center;
}
.trophy-icon{
  width: 44px;
  height: 44px;
  margin-right: 8px;
  vertical-align: middle;
  background: linear-gradient(45deg, #FFD700, #FFA500);
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  position: relative;
  display: inline-block;
}
.trophy-icon::before{
  content: '';
  position: absolute;
  top: 4px;
  left: 4px;
  right: 4px;
  bottom: 8px;
  background: linear-gradient(45deg, #FFA500, #FF8C00);
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
}
.trophy-icon::after{
  content: '';
  position: absolute;
  bottom: -2px;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 4px;
  background: #FFD700;
  border-radius: 0 0 4px 4px;
}
.grid{
  display:flex;
  flex-wrap: wrap;
  gap: 20px;
}
.card{
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border: 1px solid rgba(148,163,184,.15);
  border-radius: 18px;
  padding: 16px;
  box-shadow: var(--shadow);
  min-width: 260px;
  flex: 1;
}
.card-header{
  display:flex;
  flex-direction: column;
  gap:12px;
  align-items:stretch;
  margin-bottom: 12px;
}
/* Name above avatar */
.card-header .name{font-weight:700;font-size:18px}
/* Row with avatar on left, stats on right */
.header-row{display:flex;align-items:stretch;gap:12px}
/* Stack avatar over name */
.avatar-stack{display:flex;flex-direction:column;align-items:center;gap:6px;flex:0 0 var(--avatar-col, 32%);max-width:var(--avatar-col, 32%);min-width:0}
.avatar-stack .avatar{width:100%;height:auto;aspect-ratio:1/1;object-fit:cover}
.avatar-stack .name{font-weight:700;font-size:clamp(12px, 1.8vw, 18px);text-align:center;word-break:break-word}
.name-row{display:flex;align-items:baseline;gap:8px;justify-content:center;flex-wrap:wrap}
.name-row .sep{color:var(--muted)}
.name-row .count{font-variant-numeric: tabular-nums}
.avatar{
  width:64px;height:64px;border-radius:14px;object-fit:cover;border:1px solid rgba(148,163,184,.2)
}
.person{display:none}
.person-stats{display:flex;align-items:flex-start;gap:10px;flex:1;min-width:0}
/* Make the star boxes wrap within available space to avoid overflow */
.header-boxes{display:flex;flex-wrap:wrap;gap:6px;flex:1;min-width:0;max-width:100%}
/* Ensure the numeric count aligns to the top */
.person-stats .count{align-self:flex-start}
.sub{color:var(--muted);font-size:12px}
.media-row{
  display:flex;gap:10px;margin:8px 0 14px
}
.media{
  background:#0b1220;border:1px solid rgba(148,163,184,.15);border-radius:14px;padding:8px;display:flex;flex-direction:column;gap:6px;flex:1
}
.media img{width:100%;aspect-ratio:3/2;height:auto;object-fit:cover;border-radius:10px}
.badge{font-size:11px;color:var(--muted)}
.row-between{display:flex;align-items:center;justify-content:space-between}
.carousel-nav{display:flex;align-items:center;gap:6px}
.carousel-nav .index{font-size:12px;color:var(--muted)}
.progress{
  display:flex;align-items:center;justify-content:space-between;margin:8px 0 10px
}
.count{font-variant-numeric: tabular-nums}
.bar{
  width:100%;height:8px;background:#0b1220;border:1px solid rgba(148,163,184,.15);border-radius:999px;overflow:hidden;margin-left:10px
}
.fill{height:100%;background:linear-gradient(90deg, var(--accent), var(--accent-2));width:0%}
.boxes{
  display:flex;flex-wrap: wrap; gap:6px;margin:0px 0px 10px 0px
}
.box{
  width: 30px; height: 30px; border:1px dashed rgba(148,163,184,.25);border-radius:6px;display:flex;align-items:center;justify-content:center;
  font-size:16px; color:#ffd166; background: rgba(255,255,255,.02)
}
.box:empty{background: rgba(255,255,255,.06)}
.controls{
  display:flex;gap:8px;flex-wrap:wrap
}
.controls.under-media{margin-top:6px}
/* full width buttons inside card controls */
.controls button{flex:1 1 100%}
button{
  background:#0b1220;border:1px solid rgba(148,163,184,.3);color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer;
}
button:hover{border-color: rgba(148,163,184,.6)}
button.primary{background:linear-gradient(180deg, rgba(34,197,94,.1), rgba(34,197,94,.05));border-color: rgba(34,197,94,.5)}
button.danger{background:linear-gradient(180deg, rgba(239,68,68,.1), rgba(239,68,68,.05));border-color: rgba(239,68,68,.5)}
/* Disabled button states */
button:disabled,
button[disabled],
button[aria-disabled="true"],
button.is-disabled{
  opacity:.5;cursor:not-allowed;filter:grayscale(60%);box-shadow:none;
  background:#0b1220 !important;border-color: rgba(148,163,184,.2) !important;color: var(--muted);
}
button:disabled:hover,
button[disabled]:hover,
button[aria-disabled="true"]:hover,
button.is-disabled:hover{border-color: rgba(148,163,184,.2)}
.footer{margin-top:24px;color:var(--muted);font-size:12px;text-align:center}
a{color:#93c5fd}
/* Dashboard mode hides controls and scrollbars on large displays */
body.dashboard .controls{display:none}
body.dashboard .carousel-nav{display:none}
body.dashboard { overflow: hidden; --dashboard-scale: 1 }
body.dashboard ::-webkit-scrollbar{display:none}

/* Dashboard mode: smaller cards to fit all on screen */
body.dashboard .card{
  min-width: 200px;
  padding: 12px;
  font-size: 14px;
}
body.dashboard .avatar{
  width: 160px;
  height: 160px;
}
/* Ensure avatar scales within the avatar-stack column in dashboard mode */
body.dashboard .avatar-stack{flex-basis: var(--avatar-col, 28%);max-width: var(--avatar-col, 28%)}
body.dashboard .avatar-stack .avatar{width:100%;height:auto;aspect-ratio:1/1}
body.dashboard .card-header .name{
  font-size: 16px;
}
body.dashboard .media{
  padding: 6px;
}
body.dashboard .media img{
  aspect-ratio: 4/3;
}
body.dashboard .boxes{
  gap: 4px;
}
body.dashboard .box{
  width: 24px;
  height: 24px;
  font-size: 14px;
}
/* Hide star boxes on mobile app */
body.mobile .boxes{display:none}
/* Show header star boxes on mobile */
body.mobile .header-boxes{display:flex}
body.dashboard .container{
  margin: 20px auto;
  padding: 0 12px;
  transform: scale(var(--dashboard-scale));
  transform-origin: top center;
}
body.dashboard .header{
  margin-bottom: 16px;
}
body.dashboard .header button{display:none}
body.dashboard .title{
  font-size: clamp(18px, 2.5vw, 32px);
}
/* Dashboard: prevent non-essential content */
body.dashboard .footer{display:none}
@media (min-width: 768px) and (max-width: 1199px){
  .grid{display:flex;flex-wrap:wrap;gap:20px}
  .card{flex:1 1 calc(50% - 10px)}
  .media-row{flex-direction:column}
}

/* Dashboard mode overrides for medium screens */
@media (min-width: 768px) and (max-width: 1199px){
  body.dashboard .card{
    min-width: 180px;
    padding: 10px;
  }
  body.dashboard .grid{
    gap: 16px;
  }
  body.dashboard .avatar{
    width: 150px;
    height: 150px;
  }
  body.dashboard .person .name{
    font-size: 14px;
  }
  body.dashboard .media{
    padding: 4px;
  }
  body.dashboard .box{
    width: 20px;
    height: 20px;
    font-size: 12px;
  }
  body.dashboard .boxes{
    gap: 3px;
  }
}
